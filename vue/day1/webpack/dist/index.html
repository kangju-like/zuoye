<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- <link rel="stylesheet" href="./bootstrap.css" />
    <link rel="stylesheet" href="./dl.css" />
    <script src="./jquery.js"></script> -->
    <title>Document</title>
    <script src="./bundle.js"></script>
</head>

<body>
    <div class="form-signin">
        <img class="mb-4" src="https://getbootstrap.com/assets/brand/bootstrap-solid.svg" alt="" width="72" height="72">
        <h1 class="h3 mb-3 font-weight-normal">请登录</h1>
        <label for="username" class="sr-only">用户名</label>

        <input type="text" id="username" class="form-control" placeholder="账号" required="" autofocus="" autocomplete="off" style="background-image: url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAADo6zjiAAAAAXNSR0IArs4c6QAAAbNJREFUWAntV8FqwkAQnaymUkpChB7tKSfxWCie/Yb+gbdeCqGf0YsQ+hU95QNyDoWCF/HkqdeiIaEUqyZ1ArvodrOHxanQOiCzO28y781skKwFW3scPV1/febP69XqarNeNTB2KGs07U3Ttt/Ozp3bh/u7V7muheQf6ftLUWyYDB5yz1ijuPAub2QRDDunJsdGkAO55KYYjl0OUu1VXOzQZ64Tr+IiPXedGI79bQHdbheCIAD0dUY6gV6vB67rAvo6IxVgWVbFy71KBKkAFaEc2xPQarXA931ot9tyHphiPwpJgSbfe54Hw+EQHMfZ/msVEEURjMfjCjbFeG2dFxPo9/sVOSYzxmAwGIjnTDFRQLMQAjQ5pJAQkCQJ5HlekeERxHEsiE0xUUCzEO9AmqYQhiF0Oh2Yz+ewWCzEY6aYKKBZCAGYs1wuYTabKdNNMWWxnaA4gp3Yry5JBZRlWTXDvaozUgGTyQSyLAP0dbb3DtQlmcan0yngT2ekE9ARc+z4AvC7nauh9iouhpcGamJeX8XF8MaClwaeROWRA7nk+tUnyzGvZrKg0/40gdME/t8EvgG0/NOS6v9NHQAAAABJRU5ErkJggg==&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%;">
        <p id="name">请输入用户名</p>
        <label for="password" class="r-only"></label>
        <input type="password" id="password" class="form-control" placeholder="密码" required="" autocomplete="off" style="background-image: url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAADo6zjiAAAAAXNSR0IArs4c6QAAAbNJREFUWAntV8FqwkAQnaymUkpChB7tKSfxWCie/Yb+gbdeCqGf0YsQ+hU95QNyDoWCF/HkqdeiIaEUqyZ1ArvodrOHxanQOiCzO28y781skKwFW3scPV1/febP69XqarNeNTB2KGs07U3Ttt/Ozp3bh/u7V7muheQf6ftLUWyYDB5yz1ijuPAub2QRDDunJsdGkAO55KYYjl0OUu1VXOzQZ64Tr+IiPXedGI79bQHdbheCIAD0dUY6gV6vB67rAvo6IxVgWVbFy71KBKkAFaEc2xPQarXA931ot9tyHphiPwpJgSbfe54Hw+EQHMfZ/msVEEURjMfjCjbFeG2dFxPo9/sVOSYzxmAwGIjnTDFRQLMQAjQ5pJAQkCQJ5HlekeERxHEsiE0xUUCzEO9AmqYQhiF0Oh2Yz+ewWCzEY6aYKKBZCAGYs1wuYTabKdNNMWWxnaA4gp3Yry5JBZRlWTXDvaozUgGTyQSyLAP0dbb3DtQlmcan0yngT2ekE9ARc+z4AvC7nauh9iouhpcGamJeX8XF8MaClwaeROWRA7nk+tUnyzGvZrKg0/40gdME/t8EvgG0/NOS6v9NHQAAAABJRU5ErkJggg==&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%;">

        <p id="pass">请输入密码</p>
        <div class="checkbox mb-3">
            <label>
                <input type="checkbox" value="请仔细阅读并同意"> 
            </label>
        </div>
        <button id="btn" class="btn btn-lg btn-primary btn-block" type="submit">登陆</button>
        <p class="mt-5 mb-3 text-muted">© 2017-2018</p>
    </div>

    <script>
        $(function() {
            $("input").blur();

            $("#username").focus(function() {


                $("#name").addClass("block").text("请输入用户名")
                $("#name").removeClass("red")
            })
            $("#username").blur(function() {


                if ($("#username").val().length == 0) {
                    $("#name").addClass("red block").text("用户名不能为空！")
                } else {
                    $("#name").removeClass("block")
                }
            })

            $("#password").focus(function() {


                $("#pass").addClass("block").text("请输入密码")
                $("#pass").removeClass("red")
            })
            $("#password").blur(function() {


                if ($("#password").val().length == 0) {
                    $("#pass").addClass("red block").text("密码不能为空！")
                } else {
                    $("#pass").removeClass("block")
                }
            })
            $("#btn").click(function() {
                let username = $("#username").val();
                let password = $("#password").val();
                $("#password").blur();
                $("#username").blur();
                if (!$("#pass").hasClass("block") || !$("#name").hasClass("block")) {
                    $.ajax({
                        url: "http://localhost:4000/dl",
                        type: "POST",

                        data: {
                            username,
                            password
                        },
                        // dataType: "dataType",
                        success(response) {
                            console.log(response);
                            if (response.status == "1") {
                                setTimeout(() => {
                                    location.href = 'https://www.baidu.com'
                                }, 300);
                                alert("登陆成功，即将跳转百度")

                            } else if (response.status == '0') {
                                alert("用户名或者密码错误")
                            }
                        },
                        error(error) {
                            console.log(error);

                        }
                    });
                }
            })
        })
    </script>
</body>

</html>